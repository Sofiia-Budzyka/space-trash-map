<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Space Debris Tracker</title>
  <style>
    body {
      background-color: #0f1117;
      color: #e6e6e6;
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 2rem;
    }

    h1 {
      text-align: center;
      color: #00e1ff;
    }

    p.description {
      max-width: 800px;
      margin: 0 auto 2rem;
      font-size: 1rem;
      color: #bcbcbc;
      line-height: 1.5;
    }

    #controls {
      display: flex;
      justify-content: center;
      margin-bottom: 1rem;
    }

    select {
      background-color: #1f2b3a;
      color: #ffffff;
      border: none;
      padding: 0.5rem 1rem;
      font-size: 1rem;
      border-radius: 8px;
    }

    pre {
      background-color: #1c2734;
      padding: 1rem;
      border-radius: 12px;
      white-space: pre-wrap;
      word-wrap: break-word;
      max-height: 65vh;
      overflow: auto;
      font-family: monospace;
      font-size: 0.95rem;
    }

    footer {
      text-align: center;
      font-size: 0.9rem;
      color: #666;
      margin-top: 2rem;
    }
  </style>
</head>
<body>
  <h1>ðŸŒŒ Space Debris Tracker</h1>

  <p class="description">
    Space debris (also known as orbital debris or "space junk") refers to defunct satellites, spent rocket stages,
    and fragments from collisions or disintegration. Monitoring and understanding their movement is essential to
    maintaining the safety of active satellites and space missions.
  </p>

  <div id="controls">
    <label for="filter" style="margin-right: 0.5rem;">Filter:</label>
    <select id="filter">
      <option value="">All</option>
      <option value="satellite">Satellites</option>
      <option value="debris">Debris</option>
    </select>
  </div>

  <pre id="output">Loading data...</pre>

  <footer>Auto-updating every 5 seconds â€¢ Powered by Flask + Skyfield</footer>

  <script>
    const output = document.getElementById('output');
    const filter = document.getElementById('filter');
    let currentType = '';

    function loadData(type = '') {
      const url = type ? `/api/objects?type=${type}` : '/api/objects';
      fetch(url)
        .then(res => res.json())
        .then(data => {
          const sliced = data.slice(0, 50);
          output.textContent = JSON.stringify(sliced, null, 2);
        })
        .catch(err => {
          output.textContent = 'Error loading data: ' + err;
        });
    }

    // Load data on dropdown change
    filter.addEventListener('change', () => {
      currentType = filter.value;
      loadData(currentType);
    });

    // Initial load
    loadData();

    // Auto-refresh every 5 seconds
    setInterval(() => {
      loadData(currentType);
    }, 5000);
  </script>
</body>
</html>
